<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Admin Dashboard</title>
<script src="https://cdn.tailwindcss.com"></script>
<script type="module" src="firebase-config.js"></script>
</head>

<body class="bg-gray-900 text-white p-6">

<h1 class="text-3xl mb-8">Admin Dashboard</h1>

<!-- ================= MEMBER SECTION ================= -->

<div class="mb-12">
<h2 class="text-2xl mb-4">Add Member</h2>

<input id="name" placeholder="Name" class="w-full mb-3 p-3 rounded text-black">
<input id="post" placeholder="Post" class="w-full mb-3 p-3 rounded text-black">
<input id="phone" placeholder="Phone" class="w-full mb-3 p-3 rounded text-black">

<select id="blood" class="w-full mb-3 p-3 rounded text-black">
<option value="">Select Blood Group</option>
<option>A+</option><option>A-</option>
<option>B+</option><option>B-</option>
<option>O+</option><option>O-</option>
<option>AB+</option><option>AB-</option>
</select>

<input id="facebook" placeholder="Facebook URL" class="w-full mb-3 p-3 rounded text-black">
<input id="photo" placeholder="Photo URL" class="w-full mb-3 p-3 rounded text-black">

<button onclick="addMember()" class="bg-green-600 px-6 py-2 rounded">
Add Member
</button>
</div>

<div class="mb-16">
<h2 class="text-2xl mb-4">All Members</h2>
<div id="memberList" class="space-y-4"></div>
</div>

<!-- ================= GALLERY SECTION ================= -->

<div class="mb-12">
<h2 class="text-2xl mb-4">Add Gallery</h2>

<input id="gTitle" placeholder="Title" class="w-full mb-3 p-3 rounded text-black">
<input id="gDate" placeholder="Date" class="w-full mb-3 p-3 rounded text-black">
<input id="gImage" placeholder="Image URL" class="w-full mb-3 p-3 rounded text-black">

<button onclick="addGallery()" class="bg-blue-600 px-6 py-2 rounded">
Add Gallery
</button>
</div>

<div>
<h2 class="text-2xl mb-4">All Gallery</h2>
<div id="galleryList" class="space-y-4"></div>
</div>

<script type="module">
import { db } from "./firebase-config.js";
import {
collection, addDoc, getDocs, deleteDoc, doc
} from "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";

window.addMember = async function(){
await addDoc(collection(db,"members"),{
name: name.value,
post: post.value,
phone: phone.value,
blood: blood.value,
facebook: facebook.value,
photo: photo.value
});
loadMembers();
};

async function loadMembers(){
const snapshot = await getDocs(collection(db,"members"));
memberList.innerHTML="";
snapshot.forEach(d=>{
const data=d.data();
memberList.innerHTML+=`
<div class="bg-gray-800 p-4 rounded flex justify-between">
<div>
<h3>${data.name}</h3>
<p>${data.post}</p>
<p>${data.phone}</p>
<p>${data.blood}</p>
<a href="${data.facebook}" target="_blank">FB</a>
</div>
<button onclick="deleteMember('${d.id}')" class="bg-red-600 px-3 rounded">Delete</button>
</div>`;
});
}

window.deleteMember=async function(id){
await deleteDoc(doc(db,"members",id));
loadMembers();
};

window.addGallery=async function(){
await addDoc(collection(db,"gallery"),{
title:gTitle.value,
date:gDate.value,
imageURL:gImage.value
});
loadGallery();
};

async function loadGallery(){
const snapshot=await getDocs(collection(db,"gallery"));
galleryList.innerHTML="";
snapshot.forEach(d=>{
const data=d.data();
galleryList.innerHTML+=`
<div class="bg-gray-800 p-4 rounded flex justify-between">
<div>
<h3>${data.title}</h3>
<p>${data.date}</p>
</div>
<button onclick="deleteGallery('${d.id}')" class="bg-red-600 px-3 rounded">Delete</button>
</div>`;
});
}

window.deleteGallery=async function(id){
await deleteDoc(doc(db,"gallery",id));
loadGallery();
};

loadMembers();
loadGallery();
</script>

</body>
</html>
